<!DOCTYPE html>
<html lang="en-us" dir="ltr">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="A post by Alex Xu on Google Map#Read the full article here
Google started project Gùê®ùê®ùê†ùê•ùêû Mùêöùê©ùê¨ in 2005. As of March 2021, Google Maps had one billion daily active users, 99% coverage of the world.
Although Google Maps is a very complex system, we can break it down into 3 high-level components. In this post, let‚Äôs take a look at how to design a simplified Google Maps.">
<meta name="theme-color" content="#FFFFFF">
<meta name="color-scheme" content="light dark"><meta property="og:title" content="A post by Alex Xu on Google Map" />
<meta property="og:description" content="" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://ashutosh049.github.io/system-design/google_map_by_alex_xu/" />

<title>A post by Alex Xu on Google Map | ¬µicrolean</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/book.min.3135b6006d22219d327f0f98c65dd66cfd4263014ae6c47d245e669334f1264c.css" integrity="sha256-MTW2AG0iIZ0yfw&#43;Yxl3WbP1CYwFK5sR9JF5mkzTxJkw=" crossorigin="anonymous">
  <script defer src="/flexsearch.min.js"></script>
  <script defer src="/en.search.min.9f8f82adabf2767b6b4c00262311bcf26ed7299c1cb48445258fbdbdc615a480.js" integrity="sha256-n4&#43;CravydntrTAAmIxG88m7XKZwctIRFJY&#43;9vcYVpIA=" crossorigin="anonymous"></script>
<link rel="alternate" type="application/rss+xml" href="https://ashutosh049.github.io/system-design/google_map_by_alex_xu/index.xml" title="¬µicrolean" />
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/"><img src="/favicon.png" alt="Logo" /><span>¬µicrolean</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>












  

  



  
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-99570b6469c6a1058afdaafdd384bb2f" class="toggle"  />
    <label for="section-99570b6469c6a1058afdaafdd384bb2f" class="flex justify-between">
      <a href="/leetcode/" class="">Leetcode</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-409070daa2cadd85e99d50b3e3377157" class="toggle"  />
    <label for="section-409070daa2cadd85e99d50b3e3377157" class="flex justify-between">
      <a role="button" class="">Arrays and String Manipulation</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-c3c9612c040e56c1ebb9803fb7a02e5b" class="toggle"  />
    <label for="section-c3c9612c040e56c1ebb9803fb7a02e5b" class="flex justify-between">
      <a href="/leetcode/arrays-and-string-manipulation/sliding_window/" class="">Sliding Window</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/leetcode/arrays-and-string-manipulation/sliding_window/longest-substring-with-at-most-two-distinct-characters/" class="">159. Longest Substring with At Most Two Distinct Characters</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/leetcode/arrays-and-string-manipulation/sliding_window/longest-substring-without-repeating-characters/" class="">3. Longest Substring Without Repeating Characters</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-3e7fa6efd6e9562dc187ac291a8808c5" class="toggle"  />
    <label for="section-3e7fa6efd6e9562dc187ac291a8808c5" class="flex justify-between">
      <a role="button" class="">Binary Tree</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/leetcode/binary-tree/maximum-depth-of-binary-tree/" class="">104. Maximum Depth of Binary Tree</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/leetcode/binary-tree/balanced_binary_tree/" class="">110. Balanced Binary Tree</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/leetcode/binary-tree/144-binary-tree-preorder-traversal/" class="">144. Binary Tree Preorder Traversal</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/leetcode/binary-tree/binary_search_tree_iterator/" class="">173. Binary Search Tree Iterator</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/leetcode/binary-tree/lowest-common-ancestor-of-a-binary-tree/" class="">236. Lowest Common Ancestor of a Binary Tree</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/leetcode/binary-tree/binary-tree-paths/" class="">257. Binary Tree Paths</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/leetcode/binary-tree/binary_search/" class="">704. Binary Search</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/leetcode/binary-tree/binary_tree_cameras/" class="">968. Binary Tree Cameras</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-41b671e62aadaca7d5be898ecc9a88bf" class="toggle"  />
    <label for="section-41b671e62aadaca7d5be898ecc9a88bf" class="flex justify-between">
      <a role="button" class="">Bit Manipulation</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/leetcode/bit-manipulation/number-of-1-bits/" class="">191. Number of 1 Bits</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-98c230251e449d5a486344509138a49a" class="toggle"  />
    <label for="section-98c230251e449d5a486344509138a49a" class="flex justify-between">
      <a role="button" class="">Divide and Conquer</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-029718e74e4ce23eba823bc8a8e03ea0" class="toggle"  />
    <label for="section-029718e74e4ce23eba823bc8a8e03ea0" class="flex justify-between">
      <a role="button" class="">Dynamic Programming</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-bc6595974878ff7bbe9072f5562b0050" class="toggle"  />
    <label for="section-bc6595974878ff7bbe9072f5562b0050" class="flex justify-between">
      <a role="button" class="">Graphs</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-80f5c95a22b4db490f2c2db8034a3886" class="toggle"  />
    <label for="section-80f5c95a22b4db490f2c2db8034a3886" class="flex justify-between">
      <a href="/leetcode/heap/" class="">Heap</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-5fe69078b3f918f213d933671567009f" class="toggle"  />
    <label for="section-5fe69078b3f918f213d933671567009f" class="flex justify-between">
      <a role="button" class="">Searching</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-474ec6849ce1e4aac3c3bcca7d1b7e62" class="toggle"  />
    <label for="section-474ec6849ce1e4aac3c3bcca7d1b7e62" class="flex justify-between">
      <a role="button" class="">Sorting</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-12bf54ab1974e1ec2ae8ede403ac3841" class="toggle"  />
    <label for="section-12bf54ab1974e1ec2ae8ede403ac3841" class="flex justify-between">
      <a href="/leetcode/sorting/selection-algos/" class="">Selection Algos</a>
    </label>
  

          
  <ul>
    
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <a href="/leetcode/master-theorem/" class="">Analysis Of Algorithm</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <span>Backtracking</span>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-6301def133ee0dadb159cafddccda9e8" class="toggle"  />
    <label for="section-6301def133ee0dadb159cafddccda9e8" class="flex justify-between">
      <a href="/spring-framework/" class="">Spring Framework</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-9a0000538625343f7664359aeee4eb7d" class="toggle" checked />
    <label for="section-9a0000538625343f7664359aeee4eb7d" class="flex justify-between">
      <a href="/system-design/" class="">System Design (HLD &amp; LLD)</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/system-design/google_map_by_alex_xu/" class=" active">A post by Alex Xu on Google Map</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <a href="/about/" class="">About</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>















</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>A post by Alex Xu on Google Map</strong>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#location-service">Location Service</a></li>
        <li><a href="#map-rendering">Map Rendering</a></li>
        <li><a href="#navigation-service">Navigation Service</a></li>
        <li><a href="#more-articles-and-references">More articles and references</a></li>
        <li><a href="#questions-and-follow-ups">Questions and follow-ups</a></li>
      </ul>
    </li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="a-post-by-alex-xu-on-google-map">
  A post by Alex Xu on Google Map
  <a class="anchor" href="#a-post-by-alex-xu-on-google-map">#</a>
</h1>
<br>
<br>
<p>Read the full article 
  <a href="https://www.linkedin.com/posts/alex-xu-a8131b11_systemdesign-coding-interviewtips-activity-6889974038777724928-G3u2">here</a></p>
<p>Google started project Gùê®ùê®ùê†ùê•ùêû Mùêöùê©ùê¨ in 2005. As of March 2021, Google Maps had one billion daily active users, 99% coverage of the world.</p>
<p>Although Google Maps is a very complex system, we can break it down into 3 high-level components. In this post, let‚Äôs take a look at how to design a simplified Google Maps.</p>
<h3 id="location-service">
  Location Service
  <a class="anchor" href="#location-service">#</a>
</h3>
<p>The location service is responsible for recording a user‚Äôs location update. The Google Map clients send location updates every few seconds. The user location data is used in many cases:</p>
<ul>
<li>detect new and recently closed roads.</li>
<li>improve the accuracy of the map over time.</li>
<li>used as an input for live traffic data.</li>
</ul>
<h3 id="map-rendering">
  Map Rendering
  <a class="anchor" href="#map-rendering">#</a>
</h3>
<p>The world‚Äôs map is projected into a huge 2D map image. It is broken down into small image blocks called ‚Äútiles‚Äù (see below). The tiles are static. They don‚Äôt change very often. An efficient way to serve static tile files is with a CDN backed by cloud storage like S3. The users can load the necessary tiles to compose a map from nearby CDN.</p>
<p>What if a user is zooming and panning the map viewpoint on the client to explore their surroundings?</p>
<p>An efficient way is to pre-calculate the map blocks with different zoom levels and load the images when needed.</p>
<h3 id="navigation-service">
  Navigation Service
  <a class="anchor" href="#navigation-service">#</a>
</h3>
<p>This component is responsible for finding a reasonably fast route from point A to point B. It calls two services to help with the path calculation:</p>
<ol>
<li>
<p>Geocoding Service: resolve the given address to a latitude/longitude pair.</p>
</li>
<li>
<p>Route Planner Service: this service does three things in sequence:</p>
<ul>
<li>Calculate top-K shortest paths between A and B</li>
<li>Calculate the estimation of time for each path based on current traffic and historical data</li>
<li>Rank the paths by time predictions and user filtering. For example, the user doesn‚Äôt want to avoid tolls.</li>
</ul>
</li>
</ol>
<p>
  <img src="https://media-exp1.licdn.com/dms/image/C5622AQEGdukkslxq_A/feedshare-shrink_800/0/1642697819441?e=2147483647&amp;v=beta&amp;t=6VsadWi_6NkAQDEw3aCxDK_xP6R7isdr5uMU6M0vwMc" alt="Goole Map" />

  <a href="https://media-exp1.licdn.com/dms/image/C5622AQEGdukkslxq_A/feedshare-shrink_800/0/1642697819441?e=2147483647&amp;v=beta&amp;t=6VsadWi_6NkAQDEw3aCxDK_xP6R7isdr5uMU6M0vwMc">Image source</a></p>
<h3 id="more-articles-and-references">
  More articles and references
  <a class="anchor" href="#more-articles-and-references">#</a>
</h3>
<ul>
<li>
  <a href="https://medium.com/google-design/google-maps-cb0326d165f5">Prototyping a Smoother Map</a></li>
<li>
  <a href="https://deepmind.com/blog/article/traffic-prediction-with-advanced-graph-neural-networks">Traffic prediction with advanced Graph Neural Networks</a></li>
<li>
  <a href="https://blog.routific.com/route-optimization-google-maps-313a45e13d27">Route Optimization And Planning With Google Maps</a></li>
</ul>
<h3 id="questions-and-follow-ups">
  Questions and follow-ups
  <a class="anchor" href="#questions-and-follow-ups">#</a>
</h3>
<ul>
<li>
<blockquote>
<p>Hi Alex, Thanks for sharing. Can you go a little deeper into how to find <code>K-Shortest path</code>? How would that work? <code>DFS</code>? <code>BFS</code>? Those solutions may be pretty slow given that it could be exponential to the number of intersections there is in a typical metropolitan area. Precompute routes based on given tiles? That may work for most cases, but if there is a road closure, traffic accident, how would that be handled?</p>
</blockquote>
<ul>
<li>
<blockquote>
<p>Great question. Since the graph of the whole world is huge, we can run the shortest path on super segments instead, and then within each super segment, we can find how to navigate to the next super segment. Here is a good read: 
  <a href="https://blog.routific.com/route-optimization-google-maps-313a45e13d27">https://blog.routific.com/route-optimization-google-maps-313a45e13d27</a></p>
</blockquote>
</li>
</ul>
</li>
<li>
<blockquote>
<p>How would the Navigation server get live traffic data? Does the User Location DB store that data?</p>
</blockquote>
</li>
<li>
<blockquote>
<p>Alex Xu how does the map work offline?</p>
</blockquote>
<ul>
<li>
<blockquote>
<p>My guess is that the nearby roads, building structures, etc are cached when we first install the app or click the navigate button. The mobile device can figure out the routes without talking to the server. It couldn&rsquo;t take traffic conditions into consideration though.</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<hr>
<p>Original Article/Credit : 
  <a href="https://www.linkedin.com/posts/alex-xu-a8131b11_systemdesign-coding-interviewtips-activity-6889974038777724928-G3u2/">Alex Xu</a></p>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





  <div>
    
    <p class="copyright text-muted text-center">
      <b> Disclaimer</b>: Any product names, logos, symbols, images taken for reference purpose from
      <a href="https://leetcode.com">Leetcode.com</a>, <a href="https://www.linkedin.com">linkedin.com</a> remain the property of <a href="https://leetcode.com">Leetcode</a>, <a href="https://www.linkedin.com">linkedin.com</a>
      </br></p>
    <p class="copyright text-muted text-center">
      This blog does not accept compensation in any form from any person, organization, or company.
      There are no ads, there are no sponsorships, and there are no commissions. If it's written
      here, you can be assured no one has requested, demanded, approved, endorsed, or paid for the
      content you see, including my current employer.
      </br>
    </p>
  </div>

</div>



  <script>(function(){function e(n){const e=window.getSelection(),t=document.createRange();t.selectNodeContents(n),e.removeAllRanges(),e.addRange(t)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script>


 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#location-service">Location Service</a></li>
        <li><a href="#map-rendering">Map Rendering</a></li>
        <li><a href="#navigation-service">Navigation Service</a></li>
        <li><a href="#more-articles-and-references">More articles and references</a></li>
        <li><a href="#questions-and-follow-ups">Questions and follow-ups</a></li>
      </ul>
    </li>
  </ul>
</nav>


 
      </div>
    </aside>
    
  </main>

  
</body>
</html>












